(function(e){function t(t){for(var r,a,i=t[0],u=t[1],s=t[2],l=0,d=[];l<i.length;l++)a=i[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);f&&f(t);while(d.length)d.shift()();return c.push.apply(c,s||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,a=1;a<n.length;a++){var i=n[a];0!==o[i]&&(r=!1)}r&&(c.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},a={app:0},o={app:0},c=[];function i(e){return u.p+"js/"+({}[e]||e)+"."+{"chunk-398db822":"01f5c412","chunk-5dbb6256":"7fd47b3b","chunk-5f800862":"09ba3ac1","chunk-6e173ef8":"441b3eae","chunk-95b94d6e":"87fe8316","chunk-cf1d0bec":"3937467d","chunk-e1686cbe":"77073a07"}[e]+".js"}function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={"chunk-398db822":1,"chunk-5dbb6256":1,"chunk-5f800862":1,"chunk-6e173ef8":1,"chunk-95b94d6e":1,"chunk-cf1d0bec":1,"chunk-e1686cbe":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-398db822":"a3b16463","chunk-5dbb6256":"f19f8c00","chunk-5f800862":"aabac212","chunk-6e173ef8":"7e1038be","chunk-95b94d6e":"0e7d9f83","chunk-cf1d0bec":"7e1038be","chunk-e1686cbe":"0c02046c"}[e]+".css",o=u.p+r,c=document.getElementsByTagName("link"),i=0;i<c.length;i++){var s=c[i],l=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(l===r||l===o))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){s=d[i],l=s.getAttribute("data-href");if(l===r||l===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||o,c=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=r,delete a[e],f.parentNode.removeChild(f),n(c)},f.href=o;var h=document.getElementsByTagName("head")[0];h.appendChild(f)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var c=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=c);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=i(e);var d=new Error;s=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",d.name="ChunkLoadError",d.type=r,d.request=a,n[1](d)}o[e]=void 0}};var f=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/",u.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var f=l;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"1a25":function(e,t,n){},"1bed":function(e,t,n){"use strict";var r=n("6b98"),a=n.n(r);a.a},5438:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s}));n("96cf");var r=n("1da1"),a=n("bc3a"),o=n.n(a),c="8faedebafd734faaa5f6d53c235d22cb";function i(){return u.apply(this,arguments)}function u(){return u=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("http://ali-news.showapi.com/channelList",{headers:{Authorization:"APPCODE ".concat(c)}});case 2:return t=e.sent,e.abrupt("return",t.data.showapi_res_body.channelList);case 4:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function s(e){return l.apply(this,arguments)}function l(){return l=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:1,r=i.length>2&&void 0!==i[2]?i[2]:10,e.next=4,o.a.get("http://ali-news.showapi.com/newsList",{headers:{Authorization:"APPCODE ".concat(c)},params:{channelId:t,page:n,maxResult:r,needAllList:!1,needContent:1}});case 4:return a=e.sent,e.abrupt("return",a.data.showapi_res_body.pagebean);case 6:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}i()},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"App"},[n("Header"),n("div",{staticStyle:{width:"1080px",margin:"0 auto"}},[n("div",{staticClass:"container"},[n("router-view")],1)])],1)},o=[],c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"header"},[r("div",{staticClass:"header-container"},[r("div",{staticClass:"container"},[r("div",{staticClass:"logo"},[r("router-link",{attrs:{to:{name:"Home"}}},[r("img",{attrs:{src:n("95f2"),alt:""}})])],1),r("ul",{staticClass:"nav"},[r("li",[r("router-link",{attrs:{to:{name:"Home"}}},[e._v("首页")])],1),e.isLoading?r("li",[e._v("Loading...")]):e._e(),e._l(e.data.slice(0,5),(function(t){return r("li",{key:t.channelId},[r("router-link",{attrs:{to:{name:"ChannelNews",params:{id:t.channelId}}}},[e._v(e._s(t.name))])],1)}))],2),r("div",{staticClass:"user"},[e.isLogining?r("span",[e._v("Loading...")]):e.loginUser?[r("router-link",{attrs:{to:{name:"Personal"},href:""}},[e._v(e._s(e.loginUser.nickname))]),r("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.handleLoginOut(t)}}},[e._v("退出登录")])]:[r("router-link",{attrs:{to:{name:"Login"}}},[e._v("登录")]),r("router-link",{attrs:{to:{name:"Reg"}}},[e._v("注册")])]],2)])])])},i=[],u=n("5530"),s=n("2f62"),l={computed:Object(u["a"])(Object(u["a"])({},Object(s["b"])("channels",["data","isLoading"])),Object(s["b"])("loginUser",{loginUser:"data",isLogining:"isLoading"})),methods:{handleLoginOut:function(){this.$store.dispatch("loginUser/loginOut"),this.$router.push({name:"Login"})}}},d=l,f=(n("dc42"),n("2877")),h=Object(f["a"])(d,c,i,!1,null,"40de8418",null),p=h.exports,m={components:{Header:p}},b=m,g=(n("1bed"),Object(f["a"])(b,a,o,!1,null,"5db2dd9c",null)),v=g.exports,k=(n("7371"),n("1a25"),n("8c4f")),w=(n("d3b7"),{routes:[{path:"/",name:"Home",component:function(){return n.e("chunk-398db822").then(n.bind(null,"bb51"))}},{path:"/login",name:"Login",component:function(){return n.e("chunk-cf1d0bec").then(n.bind(null,"a55b"))}},{path:"/reg",name:"Reg",component:function(){return n.e("chunk-6e173ef8").then(n.bind(null,"b8b8"))}},{path:"/persona",name:"Personal",component:function(){return n.e("chunk-5f800862").then(n.bind(null,"90ab"))},meta:{auth:!0}},{path:"/auth",name:"Auth",component:function(){return n.e("chunk-5dbb6256").then(n.bind(null,"2fef"))}},{path:"/channel/:id",name:"ChannelNews",component:function(){return n.e("chunk-e1686cbe").then(n.bind(null,"3244"))}},{path:"*",name:"404",component:function(){return n.e("chunk-95b94d6e").then(n.bind(null,"9703"))}}],mode:"history"}),y=(n("96cf"),n("1da1")),O=n("fef9"),L={namespaced:!0,state:{data:null,isLoading:!1},mutations:{setIsLoading:function(e,t){e.isLoading=t},setData:function(e,t){e.data=t}},actions:{login:function(e,t){return Object(y["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.commit("setIsLoading",!0),n.next=3,Object(O["a"])(t);case 3:return r=n.sent,a=!1,0===r.code&&(e.commit("setData",r.data),a=!0),e.commit("setIsLoading",!1),n.abrupt("return",a);case 8:case"end":return n.stop()}}),n)})))()},whoAmI:function(e){return Object(y["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.commit("setIsLoading",!0),t.next=3,Object(O["d"])();case 3:n=t.sent,e.commit("setData",n),e.commit("setIsLoading",!1);case 6:case"end":return t.stop()}}),t)})))()},loginOut:function(e){Object(O["b"])(),e.commit("setData",null)}}},j=n("5438"),x={namespaced:!0,state:{data:[],isLoading:!1},mutations:{setIsLoading:function(e,t){e.isLoading=t},setData:function(e,t){e.data=t}},actions:{fetchDatas:function(e){return Object(y["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(j["b"])();case 2:n=t.sent,e.commit("setIsLoading",!0),e.commit("setData",n),e.commit("setIsLoading",!1);case 6:case"end":return t.stop()}}),t)})))()}}};r["a"].use(s["a"]);var _=new s["a"].Store({modules:{loginUser:L,channels:x}}),C=_;r["a"].use(k["a"]);var R=new k["a"](w);R.beforeEach((function(e,t,n){e.meta.auth?C.state.loginUser.isLoading?n({name:"Auth",query:{returnurl:e.fullPath}}):C.state.loginUser.data?n():n({name:"Login"}):n()}));var I=R;C.dispatch("channels/fetchDatas"),C.dispatch("loginUser/whoAmI"),new r["a"]({render:function(e){return e(v)},router:I,store:C}).$mount("#app")},"6b98":function(e,t,n){},7371:function(e,t,n){},"95f2":function(e,t,n){e.exports=n.p+"img/ceshi.3b52b370.jpg"},c5cf:function(e,t,n){},dc42:function(e,t,n){"use strict";var r=n("c5cf"),a=n.n(r);a.a},fef9:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d}));n("96cf");var r=n("1da1"),a=n("bc3a"),o=n.n(a);function c(e){return i.apply(this,arguments)}function i(){return i=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/api/user/login",t);case 2:return n=e.sent,r=n.headers.authorization,r&&localStorage.setItem("token",r),console.log(r),e.abrupt("return",n.data);case 7:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}function u(){return s.apply(this,arguments)}function s(){return s=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("token"),t){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,o.a.get("/api/user/whoami",{headers:{authorization:"bearer ".concat(t)}});case 5:return n=e.sent,e.abrupt("return",n.data.data);case 7:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function l(){localStorage.removeItem("token")}function d(e){return f.apply(this,arguments)}function f(){return f=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/api/user/reg",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}}});
//# sourceMappingURL=app.08447a5c.js.map